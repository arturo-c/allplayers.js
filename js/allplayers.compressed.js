var allplayers=allplayers||{};
(function(c){allplayers.api={path:"http://www.ttidwell.allplayers.com:8080/api/v1/rest",get:function(b,a,d){b=allplayers.api.path+"/"+b;b+=a.uuid?"/"+a.uuid:"";b+=a.filter?"/"+a.filter:"";b+=".jsonp?";b+=a.query?jQuery.param(a.query)+"&":"";c.ajax({url:b,dataType:"jsonp",success:function(a,b){b=="success"?d(a):console.log("Error: "+b)},error:function(a){console.log(a.responseText);d(null)}})},save:function(b,a,d){b=allplayers.api.path+"/"+b;b+=a.uuid?"/"+a.uuid:"";b+=".json";c.ajax({url:b,dataType:"json",
type:a.uuid?"PUT":"POST",data:a,success:function(a,b){b=="success"?d(a):console.log("Error: "+b)},error:function(a){console.log(a.responseText);d(null)}})},searchGroups:function(b,a){allplayers.api.get("groups",{query:b},a)},getGroup:function(b,a,d){allplayers.api.get("groups",{uuid:b,query:a},d)},saveGroup:function(b,a){a(b)},getGroupAlbums:function(b,a,d){allplayers.api.get("groups",{uuid:b,query:a,filter:"albums"},d)},getGroupEvents:function(b,a,d){allplayers.api.get("groups",{uuid:b,query:a,filter:"events"},
d)},getGroupMembers:function(b,a,d){allplayers.api.get("groups",{uuid:b,query:a,filter:"members"},d)},getGroupPhotos:function(b,a){allplayers.api.get("groups",{query:b,filter:"photos"},a)},getEvent:function(b,a,d){allplayers.api.get("events",{uuid:b,query:{fields:a}},d)},saveEvent:function(b,a){allplayers.api.save("events",b,a)}}})(jQuery);allplayers=allplayers||{};
(function(){allplayers.entity=function(c){this.description=this.title=this.uuid="";this.update(c)};allplayers.entity.prototype.get=function(){};allplayers.entity.prototype.update=function(c){if(c)for(var b in c)c.hasOwnProperty(b)&&this.hasOwnProperty(b)&&(this[b]=c[b])};allplayers.entity.prototype.getObject=function(){return{uuid:this.uuid,title:this.title,description:this.description}}})(jQuery);allplayers=allplayers||{};
(function(c){allplayers.date=function(a,b,c){this.newDate=function(a){return typeof a==="string"?new Date(a):typeof a==="object"?a:new Date};this.start=this.newDate(a);this.end=this.newDate(b);this.repeat=c?{interval:c.interval?c.interval:1,freq:c.freq?c.freq:"DAILY",until:this.newDate(c.until),bymonth:c.bymonth?c.bymonth:[],bymonthday:c.bymonthday?c.bymonthday:[],byday:c.byday?c.byday:[],exdate:c.exdate?c.exdate:[],rdate:c.rdate?c.rdate:[]}:null};if(!Date.prototype.toISOString){var b=function(a){return a<
10?"0"+a:a};Date.prototype.toISOString=function(){var a=this.getUTCFullYear()+"-";a+=b(this.getUTCMonth()+1)+"-";a+=b(this.getUTCDate())+"T";a+=b(this.getUTCHours())+":";a+=b(this.getUTCMinutes())+":";a+=b(this.getUTCSeconds())+".";var d=this.getUTCMilliseconds();d<100&&(d="0"+d);d<10&&(d="0"+d);return a+(d+"Z")}}allplayers.date.prototype.update=function(a,b,e){this.start=a?this.newDate(a):this.start;this.end=b?this.newDate(b):this.end;if(e)e.until=this.newDate(e.until),c.extend(this.repeat,e)};allplayers.date.prototype.addDate=
function(a,b){b=this.newDate(b);this.repeat[a].push(b)};allplayers.date.prototype.addException=function(a){this.addDate("except",a)};allplayers.date.prototype.addRDate=function(a){this.addDate("rdate",a)};allplayers.date.prototype.getObject=function(){var a=0,b={start:this.start.toISOString(),end:this.end.toISOString()};if(this.repeat){b.repeat={interval:this.repeat.interval,freq:this.repeat.freq,until:this.repeat.until.toISOString(),bymonth:this.repeat.bymonth,bymonthday:this.repeat.bymonthday,byday:this.repeat.byday,
exdate:[],rdate:[]};for(a=this.repeat.exdate.length;a--;)b.repeat.exdate.push(this.repeat.exdate[a].toISOString());for(a=this.repeat.rdate.length;a--;)b.repeat.rdate.push(this.repeat.rdate[a].toISOString())}return b}})(jQuery);allplayers=allplayers||{};
(function(c){allplayers.event=function(b){this.allDay=false;this.gids=[];this.resources=[];this.competitors={};this.category=b.category?b.category:"Other";this.date=new allplayers.date(b.start,b.end);this.start=this.date.start;this.end=this.date.end;allplayers.entity.call(this,b)};allplayers.event.prototype=new allplayers.entity;allplayers.event.prototype.constructor=allplayers.event;allplayers.event.prototype.get=function(b){var a=this;allplayers.api.getEvent(this.uuid,{},function(c){a.update(c);
b(a)})};allplayers.event.prototype.save=function(b){this.date.start=this.start;this.date.end=this.end;var a=this;allplayers.api.saveEvent(this.getObject(),function(c){a.update(c);b(a)})};allplayers.event.prototype.update=function(b){allplayers.entity.prototype.update.call(this,b);this.date.update(b.start,b.end)};allplayers.event.prototype.getObject=function(){return c.extend(allplayers.entity.prototype.getObject.call(this),{gids:this.gids,resources:this.resources,category:this.category,competitors:this.competitors,
date_time:this.date.getObject()})}})(jQuery);allplayers=allplayers||{};
(function(){allplayers.group=function(c){this.location=new allplayers.location;this.list_in_directory=this.activity_level=0;this.active=false;this.secondary_color=this.primary_color=this.accept_amex=this.approved_for_payment=this.registration_fees_enabled="";this.node_status=0;this.url=this.uri=this.logo="";this.groups_above_uuid=[];allplayers.entity.call(this,c)};allplayers.group.prototype=new allplayers.entity;allplayers.group.prototype.constructor=allplayers.group;allplayers.group.prototype.get=
function(c){allplayers.api.getGroup(this.uuid,{},function(b){this.update(b);c(this)})};allplayers.group.prototype.save=function(){allplayers.api.saveGroup(this)}})(jQuery);allplayers=allplayers||{};(function(){allplayers.location=function(c){this.longitude=this.latitude=this.country=this.zip=this.state=this.city=this.street="";allplayers.entity.call(this,c)};allplayers.location.prototype=new allplayers.entity;allplayers.location.prototype.constructor=allplayers.location})(jQuery);
allplayers=allplayers||{};
(function(c){var b={dialog:"#calendar-dialog-form"};allplayers.calendars={};if(!c.fn.allplayers_calendar)c.fn.allplayers_calendar=function(a){return c(this).each(function(){allplayers.calendars[c(this).selector]||new allplayers.calendar(c(this),a)})};allplayers.calendar=function(a,d){var e=this,d=c.extend(b,d,{header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},editable:true,dayClick:function(a,b,c,d){console.log(a);console.log(b);console.log(c);console.log(d)},eventClick:function(a,
b,c){console.log(a);console.log(b);console.log(c)},eventDrop:function(a){a.obj.update(a);a.obj.save()},eventResizeStop:function(a){a.obj.update(a);a.obj.save()},events:function(a,b,c){e.getEvents(a,b,c)}});this.dialog=c(d.dialog,a).hide();allplayers.calendars[d.id]=this;this.uuid="";a.fullCalendar(d)};allplayers.calendar.prototype.onEventClick=function(){console.log("Event has been clicked")};allplayers.calendar.prototype.getUUID=function(a){if(this.uuid)a.call(this);else{var b=this;allplayers.api.searchGroups({search:"Spring Soccer 2011"},
function(c){b.uuid=c[0].uuid;a.call(b)})}};allplayers.calendar.prototype.getEvents=function(a,b,c){var f=a.getFullYear()+"-";f+=a.getMonth()+1+"-";f+=a.getDate();var g=b.getFullYear()+"-";g+=b.getMonth()+1+"-";g+=b.getDate();this.getUUID(function(){allplayers.api.getGroupEvents(this.uuid,{start:f,end:g,fields:"*",limit:0,offset:0},function(a){for(var b=a.length;b--;)a[b].id=a[b].uuid,a[b].obj=new allplayers.event(a[b]);c(a)})})}})(jQuery);

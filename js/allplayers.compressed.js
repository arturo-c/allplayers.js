var allplayers=allplayers||{};(function(){allplayers.base=function(c,a){this.api=c;this.options=a};allplayers.base.prototype.log=function(c){console.log(c)}})(jQuery);allplayers=allplayers||{};
(function(c){allplayers.api=function(a){a=c.extend({api_path:"http://www.ttidwell.allplayers.com:8080/api/v1/rest"},a);allplayers.base.call(this,null,a)};allplayers.api.prototype=new allplayers.base;allplayers.api.prototype.constructor=allplayers.api;allplayers.api.prototype.get=function(a,b,d){a=this.options.api_path+"/"+a;a+=b.uuid?"/"+b.uuid:"";a+=b.filter?"/"+b.filter:"";a+=".jsonp?";a+=b.query?jQuery.param(b.query)+"&":"";c.ajax({url:a,dataType:"jsonp",success:function(b,a){a=="success"?d(b):
this.log("Error: "+a)}})};allplayers.api.prototype.save=function(a,b,d){a=this.options.api_path+"/"+a;a+=b.uuid?"/"+b.uuid:"";a+=".json";c.ajax({url:a,dataType:"json",type:b.uuid?"PUT":"POST",data:b,success:function(b,a){a=="success"?d(b):this.log("Error: "+a)}})};allplayers.api.prototype.searchGroups=function(a,b){this.get("groups",{query:a},b)};allplayers.api.prototype.getGroup=function(a,b,d){this.get("groups",{uuid:a,query:b},d)};allplayers.api.prototype.saveGroup=function(a,b){this.log("Saving Group");
this.log(a);b(a)};allplayers.api.prototype.getGroupAlbums=function(a,b,d){this.get("groups",{uuid:a,query:b,filter:"albums"},d)};allplayers.api.prototype.getGroupEvents=function(a,b,d){this.get("groups",{uuid:a,query:b,filter:"events"},d)};allplayers.api.prototype.getGroupMembers=function(a,b,d){this.get("groups",{uuid:a,query:b,filter:"members"},d)};allplayers.api.prototype.getGroupPhotos=function(a,b){this.get("groups",{query:a,filter:"photos"},b)};allplayers.api.prototype.saveEvent=function(a,
b){this.save("events",a,b)}})(jQuery);allplayers=allplayers||{};(function(c){allplayers.entity=function(a,b){this.description=this.title=this.uuid="";allplayers.base.call(this,a,b)};allplayers.entity.prototype=new allplayers.base;allplayers.entity.prototype.constructor=allplayers.entity;allplayers.entity.prototype.update=function(a){c.extend(true,this,a)};allplayers.entity.prototype.getObject=function(){return{uuid:this.uuid,title:this.title,description:this.description}}})(jQuery);
allplayers=allplayers||{};
(function(c){allplayers.date=function(b,a,c){this.newDate=function(b){return typeof b==="string"?new Date(b):typeof b==="object"?b:new Date};this.start=this.newDate(b);this.end=this.newDate(a);this.repeat=c?{interval:c.interval?c.interval:1,freq:c.freq?c.freq:"DAILY",until:this.newDate(c.until),bymonth:c.bymonth?c.bymonth:[],bymonthday:c.bymonthday?c.bymonthday:[],byday:c.byday?c.byday:[],exdate:c.exdate?c.exdate:[],rdate:c.rdate?c.rdate:[]}:null};if(!Date.prototype.toISOString){var a=function(b){return b<
10?"0"+b:b};Date.prototype.toISOString=function(){var b=this.getUTCFullYear()+"-";b+=a(this.getUTCMonth()+1)+"-";b+=a(this.getUTCDate())+"T";b+=a(this.getUTCHours())+":";b+=a(this.getUTCMinutes())+":";b+=a(this.getUTCSeconds())+".";var d=this.getUTCMilliseconds();d<100&&(d="0"+d);d<10&&(d="0"+d);return b+(d+"Z")}}allplayers.date.prototype.update=function(b,a,e){this.start=b?this.newDate(b):this.start;this.end=a?this.newDate(a):this.end;if(e)e.until=this.newDate(e.until),c.extend(this.repeat,e)};allplayers.date.prototype.addDate=
function(b,a){a=this.newDate(a);this.repeat[b].push(a)};allplayers.date.prototype.addException=function(b){this.addDate("except",b)};allplayers.date.prototype.addRDate=function(b){this.addDate("rdate",b)};allplayers.date.prototype.getObject=function(){var b=0,a={date_start:this.start.toISOString(),date_end:this.end.toISOString()};if(this.repeat){a.repeat={interval:this.repeat.interval,freq:this.repeat.freq,until:this.repeat.until.toISOString(),bymonth:this.repeat.bymonth,bymonthday:this.repeat.bymonthday,
byday:this.repeat.byday,exdate:[],rdate:[]};for(b=this.repeat.exdate.length;b--;)a.repeat.exdate.push(this.repeat.exdate[b].toISOString());for(b=this.repeat.rdate.length;b--;)a.repeat.rdate.push(this.repeat.rdate[b].toISOString())}return a}})(jQuery);allplayers=allplayers||{};
(function(c){allplayers.event=function(a,b,c){this.allDay=false;this.gids=[];this.resources=[];this.category=c.category?c.category:"Other";this.competitors={};this.date_time=new allplayers.date(c.start,c.end);allplayers.entity.call(this,a,b);this.update(c)};allplayers.event.prototype=new allplayers.entity;allplayers.event.prototype.constructor=allplayers.event;allplayers.event.prototype.save=function(){this.api.saveEvent(this.getObject(),function(){console.log("Event Saved!!!")})};allplayers.event.prototype.update=
function(a){allplayers.entity.prototype.update.call(this,a);this.date_time.update(a.start,a.end)};allplayers.event.prototype.getObject=function(){return c.extend(allplayers.entity.prototype.getObject.call(this),{gids:this.gids,resources:this.resources,category:this.category,competitors:this.competitors,date_time:this.date_time.getObject()})}})(jQuery);allplayers=allplayers||{};
(function(){allplayers.group=function(c,a,b){this.location=new allplayers.location(c,a);this.list_in_directory=this.activity_level=0;this.active=false;this.secondary_color=this.primary_color=this.accept_amex=this.approved_for_payment=this.registration_fees_enabled="";this.node_status=0;this.url=this.uri=this.logo="";this.groups_above_uuid=[];allplayers.entity.call(this,c,a);this.update(b)};allplayers.group.prototype=new allplayers.entity;allplayers.group.prototype.constructor=allplayers.group;allplayers.group.prototype.save=
function(){this.api.saveGroup(this)}})(jQuery);allplayers=allplayers||{};
(function(){allplayers.groups=function(c,a){allplayers.base.call(this,c,a)};allplayers.groups.prototype=new allplayers.base;allplayers.groups.prototype.constructor=allplayers.groups;allplayers.groups.prototype.getGroups=function(c,a){this.api.getGroups(c,function(b){for(var c=[],e=b.length;e--;)c.push(new allplayers.group(this.options,this.api,b[e]));a(c)})};allplayers.groups.prototype.getGroup=function(c){this.api.getGroup(c,function(a){return new allplayers.group(this.options,this.api,a)})}})(jQuery);
allplayers=allplayers||{};(function(){allplayers.location=function(c,a){this.longitude=this.latitude=this.country=this.zip=this.state=this.city=this.street="";allplayers.entity.call(this,c,a)};allplayers.location.prototype=new allplayers.entity;allplayers.location.prototype.constructor=allplayers.location})(jQuery);allplayers=allplayers||{};
(function(c){var a={dialog:"#calendar-dialog-form"};allplayers.calendars={};if(!c.fn.allplayers_calendar)c.fn.allplayers_calendar=function(b){return c(this).each(function(){allplayers.calendars[c(this).selector]||new allplayers.calendar(c(this),b)})};allplayers.calendar=function(b,d){var e=this,d=c.extend(a,d,{header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},editable:true,dayClick:function(b,a,c,d){console.log(b);console.log(a);console.log(c);console.log(d)},eventClick:function(b,
a,c){console.log(b);console.log(a);console.log(c)},eventDrop:function(b){b.update(b);b.save()},eventResizeStop:function(b){b.update(b);b.save()},events:function(b,a,c){e.getEvents(b,a,c)}});this.dialog=c(d.dialog,b).hide();allplayers.calendars[d.id]=this;this.uuid="";this.api=new allplayers.api;b.fullCalendar(d)};allplayers.calendar.prototype.onEventClick=function(){console.log("Event has been clicked")};allplayers.calendar.prototype.getUUID=function(b){if(this.uuid)b.call(this);else{var a=this;this.api.searchGroups({search:"Spring Soccer 2011"},
function(c){a.uuid=c[0].uuid;b.call(a)})}};allplayers.calendar.prototype.getEvents=function(b,a,c){var f=b.getFullYear()+"-";f+=b.getMonth()+1+"-";f+=b.getDate();var g=a.getFullYear()+"-";g+=a.getMonth()+1+"-";g+=a.getDate();this.getUUID(function(){var b=this;this.api.getGroupEvents(this.uuid,{start:f,end:g,fields:"*",limit:0,offset:0},function(a){for(var d=a.length;d--;)a[d].id=a[d].uuid,a[d]=new allplayers.event(b.api,b.options,a[d]);c(a)})})}})(jQuery);

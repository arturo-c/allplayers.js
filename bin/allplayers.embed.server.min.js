(function(){var c=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(a){function d(){!c&&this.init&&this.init.apply(this,arguments)}var f=this.prototype;c=!0;var g=new this;c=!1;for(var e in a)g[e]="function"==typeof a[e]&&"function"==typeof f[e]&&b.test(a[e])?function(a,b){return function(){var c=this._super;this._super=f[a];var d=b.apply(this,arguments);this._super=c;return d}}(e,a[e]):a[e];d.prototype=g;d.prototype.constructor=d;d.extend=arguments.callee;
return d}})();
(function(c){var b={trace:function(a){void 0!==c.console&&c.console.log("Porthole: "+a)},error:function(a){void 0!==c.console&&c.console.error("Porthole: "+a)},WindowProxy:function(){}};b.WindowProxy.prototype={post:function(){},addEventListener:function(){},removeEventListener:function(){}};b.WindowProxyBase=Class.extend({init:function(a){void 0===a&&(a="");this.targetWindowName=a;this.origin=c.location.protocol+"//"+c.location.host;this.eventListeners=[]},getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},
getTargetWindow:function(){return b.WindowProxy.getTargetWindow(this.targetWindowName)},post:function(a,b){void 0===b&&(b="*");this.dispatchMessage({data:a,sourceOrigin:this.getOrigin(),targetOrigin:b,sourceWindowName:c.name,targetWindowName:this.getTargetWindowName()})},addEventListener:function(a){this.eventListeners.push(a);return a},removeEventListener:function(a){var b;try{b=this.eventListeners.indexOf(a),this.eventListeners.splice(b,1)}catch(c){this.eventListeners=[]}},dispatchEvent:function(a){var b;
for(b=0;b<this.eventListeners.length;b++)try{this.eventListeners[b](a)}catch(c){}}});b.WindowProxyLegacy=b.WindowProxyBase.extend({init:function(a,b){this._super(b);if(null!==a)this.proxyIFrameName=this.targetWindowName+"ProxyIFrame",this.proxyIFrameLocation=a,this.proxyIFrameElement=this.createIFrameProxy();else throw this.proxyIFrameElement=null,Error("proxyIFrameUrl can't be null");},createIFrameProxy:function(){var a=document.createElement("iframe");a.setAttribute("id",this.proxyIFrameName);a.setAttribute("name",
this.proxyIFrameName);a.setAttribute("src",this.proxyIFrameLocation);a.setAttribute("frameBorder","1");a.setAttribute("scrolling","auto");a.setAttribute("width",30);a.setAttribute("height",30);a.setAttribute("style","position: absolute; left: -100px; top:0px;");a.style.setAttribute&&a.style.setAttribute("cssText","position: absolute; left: -100px; top:0px;");document.body.appendChild(a);return a},dispatchMessage:function(a){var d=c.encodeURIComponent;this.proxyIFrameElement&&(a=this.proxyIFrameLocation+
"#"+d(b.WindowProxy.serialize(a)),this.proxyIFrameElement.setAttribute("src",a),this.proxyIFrameElement.height=50<this.proxyIFrameElement.height?50:100)}});b.WindowProxyHTML5=b.WindowProxyBase.extend({init:function(a,b){this._super(b);this.eventListenerCallback=null},dispatchMessage:function(a){this.getTargetWindow().postMessage(b.WindowProxy.serialize(a),a.targetOrigin)},addEventListener:function(a){if(0===this.eventListeners.length){var b=this;this.eventListenerCallback=function(a){b.eventListener(b,
a)};c.addEventListener("message",this.eventListenerCallback,!1)}return this._super(a)},removeEventListener:function(a){this._super(a);0===this.eventListeners.length&&(c.removeEventListener("message",this.eventListenerCallback),this.eventListenerCallback=null)},eventListener:function(a,c){var f=b.WindowProxy.unserialize(c.data);f&&(""==a.targetWindowName||f.sourceWindowName==a.targetWindowName)&&a.dispatchEvent(new b.MessageEvent(f.data,c.origin,a))}});"function"!==typeof c.postMessage?(b.trace("Using legacy browser support"),
b.WindowProxy=b.WindowProxyLegacy.extend({})):(b.trace("Using built-in browser support"),b.WindowProxy=b.WindowProxyHTML5.extend({}));b.WindowProxy.serialize=function(a){if("undefined"===typeof JSON)throw Error("Porthole serialization depends on JSON!");return JSON.stringify(a)};b.WindowProxy.unserialize=function(a){if("undefined"===typeof JSON)throw Error("Porthole unserialization dependens on JSON!");try{var b=JSON.parse(a)}catch(c){return!1}return b};b.WindowProxy.getTargetWindow=function(a){return""===
a?top:"top"===a||"parent"===a?c[a]:parent.frames[a]};b.MessageEvent=function(a,b,c){this.data=a;this.origin=b;this.source=c};b.WindowProxyDispatcher={forwardMessageEvent:function(){var a;a=c.decodeURIComponent;var d;0<document.location.hash.length&&(a=b.WindowProxy.unserialize(a(document.location.hash.substr(1))),d=b.WindowProxy.getTargetWindow(a.targetWindowName),(d=b.WindowProxyDispatcher.findWindowProxyObjectInWindow(d,a.sourceWindowName))?d.origin===a.targetOrigin||"*"===a.targetOrigin?d.dispatchEvent(new b.MessageEvent(a.data,
a.sourceOrigin,d)):b.error("Target origin "+d.origin+" does not match desired target of "+a.targetOrigin):b.error("Could not find window proxy object on the target window"))},findWindowProxyObjectInWindow:function(a,b){var c;a.RuntimeObject&&(a=a.RuntimeObject());if(a)for(c in a)if(a.hasOwnProperty(c))try{if(null!==a[c]&&"object"===typeof a[c]&&a[c]instanceof a.Porthole.WindowProxy&&a[c].getTargetWindowName()===b)return a[c]}catch(g){}return null},start:function(){c.addEventListener?c.addEventListener("resize",
b.WindowProxyDispatcher.forwardMessageEvent,!1):document.body.attachEvent?c.attachEvent("onresize",b.WindowProxyDispatcher.forwardMessageEvent):b.error("Cannot attach resize event")}};"undefined"!==typeof c.exports?c.exports.Porthole=b:c.Porthole=b})(this);var allplayers=allplayers||{};allplayers.embed=function(c,b){if(b){b.proxy="https://www.allplayers.com";b.proxy+="/sites/all/libraries/porthole/src/proxy.html";c=c||{};for(var a in b)c.hasOwnProperty(a)||(c[a]=b[a]);this.options=c;this.init()}};
allplayers.embed.prototype.init=function(){document.proxy=this};allplayers=allplayers||{embed:{}};allplayers.embed.server=function(c){allplayers.embed.call(this,c,{getContainer:function(){return jQuery()},isComplete:function(){return!1}})};allplayers.embed.server.prototype=new allplayers.embed;allplayers.embed.server.prototype.constructor=allplayers.embed.server;
allplayers.embed.server.prototype.init=function(){allplayers.embed.prototype.init.call(this);this.container=this.options.getContainer();this.height=0;this.heightTimer=null;this.queue={};var c=this;this.proxy=new Porthole.WindowProxy(this.options.proxy);var b=null;jQuery(document).bind("DOMSubtreeModified",function(){b&&clearTimeout(b);b=setTimeout(function(){c.resize()},500)});this.options.isComplete()&&this.proxy.post({event:{name:"complete"}});this.proxy.addEventListener(function(a){if(a=a.data.hasOwnProperty("event")?
a.data.event:!1)switch(a.name){case "chromeMsgResp":if(a.data.hasOwnProperty("guid")&&c.queue.hasOwnProperty(a.data.guid))c.queue[a.data.guid](a.data.response);break;case "chromePluginReady":window.postMessage(a,"*")}});this.resize();this.proxy.post({event:{name:"serverReady"}})};
allplayers.embed.server.prototype.sendMessage=function(c,b){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};c.guid=a()+a()+a();this.proxy.post({event:{name:"chromeMsg",data:c}});this.queue[c.guid]=b};
allplayers.embed.server.prototype.resize=function(){jQuery('a[href^="https://www."]',this.container).each(function(){var a=jQuery(this).attr("href");jQuery(this).attr({href:a.replace(/https:\/\/www.(.*?).allplayers.com/,"https://platform.$1.allplayers.com")})});var c=this,b=function(){var a=c.container.outerHeight(!0);c.height!==a&&(c.height=a,c.proxy.post({height:c.height,event:{name:"init",height:c.height,id:window.location.hash}}));c.heightTimer&&clearTimeout(c.heightTimer);c.heightTimer=setTimeout(b,
500)};b()};

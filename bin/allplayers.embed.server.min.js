var NO_JQUERY={};
(function(e,p,k){if(!("console"in e)){var m=e.console={};m.log=m.warn=m.error=m.debug=function(){}}p===NO_JQUERY&&(p={fn:{},extend:function(){for(var a=arguments[0],b=1,c=arguments.length;b<c;b++){var f=arguments[b],l;for(l in f)a[l]=f[l]}return a}});p.fn.pm=function(){console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])");return this};p.pm=e.pm=function(a){d.send(a)};p.pm.bind=e.pm.bind=function(a,b,c,f,l){d.bind(a,b,c,f,!0===l)};p.pm.unbind=e.pm.unbind=function(a,
b){d.unbind(a,b)};p.pm.origin=e.pm.origin=null;p.pm.poll=e.pm.poll=200;var d={send:function(a){a=p.extend({},d.defaults,a);var b=a.target;if(a.target)if(a.type){var c={data:a.data,type:a.type};a.success&&(c.callback=d._callback(a.success));a.error&&(c.errback=d._callback(a.error));"postMessage"in b&&!a.hash?(d._bind(),b.postMessage(JSON.stringify(c),a.origin||"*")):(d.hash._bind(),d.hash.send(a,c))}else console.warn("postmessage type required");else console.warn("postmessage target window required")},
bind:function(a,b,c,f,l){d._replyBind(a,b,c,f,l)},_replyBind:function(a,b,c,f,l){"postMessage"in e&&!f?d._bind():d.hash._bind();f=d.data("listeners.postmessage");f||(f={},d.data("listeners.postmessage",f));var h=f[a];h||(h=[],f[a]=h);h.push({fn:b,callback:l,origin:c||p.pm.origin})},unbind:function(a,b){var c=d.data("listeners.postmessage");if(c)if(a)if(b){var f=c[a];if(f){for(var l=[],h=0,g=f.length;h<g;h++){var n=f[h];n.fn!==b&&l.push(n)}c[a]=l}}else delete c[a];else for(h in c)delete c[h]},data:function(a,
b){return b===k?d._data[a]:d._data[a]=b},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var a=[],b=0;32>b;b++)a[b]=d._CHARS[0|32*Math.random()];return a.join("")},_callback:function(a){var b=d.data("callbacks.postmessage");b||(b={},d.data("callbacks.postmessage",b));var c=d._random();b[c]=a;return c},_bind:function(){d.data("listening.postmessage")||(e.addEventListener?e.addEventListener("message",d._dispatch,!1):e.attachEvent&&e.attachEvent("onmessage",
d._dispatch),d.data("listening.postmessage",1))},_dispatch:function(a){try{var b=JSON.parse(a.data)}catch(c){console.warn("postmessage data invalid json: ",c);return}if(b.type){var f=(d.data("callbacks.postmessage")||{})[b.type];if(f)f(b.data);else for(var f=(d.data("listeners.postmessage")||{})[b.type]||[],l=0,h=f.length;l<h;l++){var g=f[l];if(g.origin&&"*"!==g.origin&&a.origin!==g.origin)console.warn("postmessage message origin mismatch",a.origin,g.origin),b.errback&&d.send({target:a.source,data:{message:"postmessage origin mismatch",
origin:[a.origin,g.origin]},type:b.errback});else{var n=function(c){b.callback&&d.send({target:a.source,data:c,type:b.callback})};try{g.callback?g.fn(b.data,n,a):n(g.fn(b.data,a))}catch(e){if(b.errback)d.send({target:a.source,data:e,type:b.errback});else throw e;}}}}else console.warn("postmessage message type required")},hash:{send:function(a,b){var c=a.target,f=a.url;if(f){var f=d.hash._url(f),l,h=d.hash._url(e.location.href);if(e==c.parent)l="parent";else try{for(var g=0,n=parent.frames.length;g<
n;g++)if(parent.frames[g]==e){l=g;break}}catch(k){l=e.name}null==l?console.warn("postmessage windows must be direct parent/child windows and the child must be available through the parent window.frames list"):(l={"x-requested-with":"postmessage",source:{name:l,url:h},postmessage:b},h="#x-postmessage-id="+d._random(),c.location=f+h+encodeURIComponent(JSON.stringify(l)))}else console.warn("postmessage target window url is required")},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:50,_bind:function(){d.data("polling.postmessage")||
(setInterval(function(){var a=""+e.location.hash,b=d.hash._regex.exec(a);b&&(b=b[1],d.hash._last!==b&&(d.hash._last=b,d.hash._dispatch(a.substring(d.hash._regex_len))))},p.pm.poll||200),d.data("polling.postmessage",1))},_dispatch:function(a){if(a){try{if(a=JSON.parse(decodeURIComponent(a)),!("postmessage"===a["x-requested-with"]&&a.source&&null!=a.source.name&&a.source.url&&a.postmessage))return}catch(b){return}var c=a.postmessage,f=(d.data("callbacks.postmessage")||{})[c.type];if(f)f(c.data);else{var l;
l="parent"===a.source.name?e.parent:e.frames[a.source.name];for(var f=(d.data("listeners.postmessage")||{})[c.type]||[],h=0,g=f.length;h<g;h++){var n=f[h];if(n.origin){var k=/https?\:\/\/[^\/]*/.exec(a.source.url)[0];if("*"!==n.origin&&k!==n.origin){console.warn("postmessage message origin mismatch",k,n.origin);c.errback&&d.send({target:l,data:{message:"postmessage origin mismatch",origin:[k,n.origin]},type:c.errback,hash:!0,url:a.source.url});continue}}k=function(b){c.callback&&d.send({target:l,
data:b,type:c.callback,hash:!0,url:a.source.url})};try{n.callback?n.fn(c.data,k):k(n.fn(c.data))}catch(m){if(c.errback)d.send({target:l,data:m,type:c.errback,hash:!0,url:a.source.url});else throw m;}}}}},_url:function(a){return(""+a).replace(/#.*$/,"")}}};p.extend(d,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})})(this,"undefined"===typeof jQuery?NO_JQUERY:jQuery);"JSON"in window&&window.JSON||(JSON={});
(function(){function e(a){return 10>a?"0"+a:a}function p(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=c[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function k(c,d){var g,n,e,m,s=a,r,q=d[c];q&&"object"===typeof q&&"function"===typeof q.toJSON&&(q=q.toJSON(c));"function"===typeof f&&(q=f.call(d,c,q));switch(typeof q){case "string":return p(q);case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);
case "object":if(!q)return"null";a+=b;r=[];if("[object Array]"===Object.prototype.toString.apply(q)){m=q.length;for(g=0;g<m;g+=1)r[g]=k(g,q)||"null";e=0===r.length?"[]":a?"[\n"+a+r.join(",\n"+a)+"\n"+s+"]":"["+r.join(",")+"]";a=s;return e}if(f&&"object"===typeof f)for(m=f.length,g=0;g<m;g+=1)n=f[g],"string"===typeof n&&(e=k(n,q))&&r.push(p(n)+(a?": ":":")+e);else for(n in q)Object.hasOwnProperty.call(q,n)&&(e=k(n,q))&&r.push(p(n)+(a?": ":":")+e);e=0===r.length?"{}":a?"{\n"+a+r.join(",\n"+a)+"\n"+
s+"}":"{"+r.join(",")+"}";a=s;return e}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,b,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;"function"!==typeof JSON.stringify&&(JSON.stringify=function(c,d,g){var e;b=a="";if("number"===typeof g)for(e=0;e<g;e+=1)b+=" ";else"string"===typeof g&&(b=g);if((f=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return k("",{"":c})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var f,l,e=a[d];if(e&&"object"===typeof e)for(f in e)Object.hasOwnProperty.call(e,f)&&(l=c(e,f),void 0!==l?e[f]=l:delete e[f]);return b.call(a,d,e)}var d;m.lastIndex=0;m.test(a)&&(a=a.replace(m,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();window.allplayers=window.allplayers||{};
(function(e,p,k,m){var d={PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"};d.ALPHA+="abcdefghijklmnopqrstuvwxyz0123456789+/";d.makeDOMException=function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(a){var b=Error("DOM Exception 5");b.code=b.number=5;b.name=b.description="INVALID_CHARACTER_ERR";b.toString=function(){return"Error: "+b.name+": "+b.message};return b}};d.getbyte64=function(a,b){var c=d.ALPHA.indexOf(a.charAt(b));if(-1===c)throw d.makeDOMException();return c};
d.decode=function(a){a=""+a;var b=d.getbyte64,c,f,e,h=a.length;if(0===h)return a;if(0!==h%4)throw d.makeDOMException();c=0;a.charAt(h-1)===d.PADCHAR&&(c=1,a.charAt(h-2)===d.PADCHAR&&(c=2),h-=4);var g=[];for(f=0;f<h;f+=4)e=b(a,f)<<18|b(a,f+1)<<12|b(a,f+2)<<6|b(a,f+3),g.push(String.fromCharCode(e>>16,e>>8&255,e&255));switch(c){case 1:e=b(a,f)<<18;e|=b(a,f+1)<<12;e|=b(a,f+2)<<6;g.push(String.fromCharCode(e>>16,e>>8&255));break;case 2:e=b(a,f)<<18|b(a,f+1)<<12,g.push(String.fromCharCode(e>>16))}return g.join("")};
d.getbyte=function(a,b){var c=a.charCodeAt(b);if(255<c)throw d.makeDOMException();return c};d.encode=function(a){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var b=d.PADCHAR,c=d.ALPHA,f=d.getbyte,e,h,g=[];a=""+a;var k=a.length-a.length%3;if(0===a.length)return a;for(e=0;e<k;e+=3)h=f(a,e)<<16,h|=f(a,e+1)<<8,h|=f(a,e+2),g.push(c.charAt(h>>18)),g.push(c.charAt(h>>12&63)),g.push(c.charAt(h>>6&63)),g.push(c.charAt(h&63));switch(a.length-k){case 1:h=f(a,e)<<16;g.push(c.charAt(h>>
18)+c.charAt(h>>12&63)+b+b);break;case 2:h=f(a,e)<<16|f(a,e+1)<<8,g.push(c.charAt(h>>18)+c.charAt(h>>12&63)+c.charAt(h>>6&63)+b)}return g.join("")};k.base64=d;k.embed=function(a,b){if(b){a=a||{};for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c]);this.options=a;this.init()}};k.embed.getParam=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(e.location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))};k.embed.prototype.init=function(){}})(window,
document,window.allplayers);window.allplayers=window.allplayers||{embed:{}};
(function(e,p,k,m,d){k.embed.server=function(a){k.embed.call(this,a,{getContainer:function(){return m()},isComplete:function(){return!1}})};k.embed.server.prototype=new k.embed;k.embed.server.prototype.constructor=k.embed.server;k.embed.server.prototype.init=function(){k.embed.prototype.init.call(this);this.ehost=k.embed.getParam("ehost");this.ehost=k.base64.decode(this.ehost);this.container=this.options.getContainer();this.height=0;this.heightTimer=null;this.queue={};var a=this,b=null;m(p).bind("DOMSubtreeModified",
function(){b&&clearTimeout(b);b=setTimeout(function(){a.resize()},500)});this.options.isComplete()&&m.pm({target:e.parent,url:this.ehost,type:"complete"});m.pm.bind("chromeMsgResp",function(b){if(b.hasOwnProperty("guid")&&a.queue.hasOwnProperty(b.guid))a.queue[b.guid](b.response)});m.pm.bind("addStyle",function(a){if(a){a=a.replace(/[<>]/g,"");var b=m('link[type="text/css"]');b.length&&(b=b.eq(b.length-1),b.after(m(p.createElement("style")).attr({type:"text/css"}).append(a)))}});this.resize();m.pm({target:e.parent,
url:this.ehost,type:"serverReady"})};k.embed.server.prototype.sendMessage=function(a,b){var c=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};a.guid=c()+c()+c();m.pm({target:e.parent,type:"chromeMsg",url:this.ehost,data:a});this.queue[a.guid]=b};k.embed.server.prototype.resize=function(){m('a[href^="https://www."]',this.container).each(function(){var a=m(this).attr("href");m(this).attr({href:a.replace(/https:\/\/www.(.*?).allplayers.com/,"https://platform.$1.allplayers.com")})});
var a=this,b=function(){var c=a.container.outerHeight(!0),c=100<c?c:100;a.height!==c&&m.pm({target:e.parent,url:a.ehost,type:"init",data:{height:c,id:e.location.hash},success:function(b){a.height=b.height}});a.heightTimer&&clearTimeout(a.heightTimer);a.heightTimer=setTimeout(b,500)};b()}})(window,document,window.allplayers,jQuery);

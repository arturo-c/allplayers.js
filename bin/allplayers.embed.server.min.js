var NO_JQUERY={};
(function(d,n,m){if(!("console"in d)){var h=d.console={};h.log=h.warn=h.error=h.debug=function(){}}n===NO_JQUERY&&(n={fn:{},extend:function(){for(var a=arguments[0],b=1,e=arguments.length;b<e;b++){var f=arguments[b],l;for(l in f)a[l]=f[l]}return a}});n.fn.pm=function(){console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])");return this};n.pm=d.pm=function(a){c.send(a)};n.pm.bind=d.pm.bind=function(a,b,e,f,l){c.bind(a,b,e,f,!0===l)};n.pm.unbind=d.pm.unbind=function(a,
b){c.unbind(a,b)};n.pm.origin=d.pm.origin=null;n.pm.poll=d.pm.poll=200;var c={send:function(a){a=n.extend({},c.defaults,a);var b=a.target;if(a.target)if(a.type){var e={data:a.data,type:a.type};a.success&&(e.callback=c._callback(a.success));a.error&&(e.errback=c._callback(a.error));"postMessage"in b&&!a.hash?(c._bind(),b.postMessage(JSON.stringify(e),a.origin||"*")):(c.hash._bind(),c.hash.send(a,e))}else console.warn("postmessage type required");else console.warn("postmessage target window required")},
bind:function(a,b,e,f,l){c._replyBind(a,b,e,f,l)},_replyBind:function(a,b,e,f,l){"postMessage"in d&&!f?c._bind():c.hash._bind();f=c.data("listeners.postmessage");f||(f={},c.data("listeners.postmessage",f));var k=f[a];k||(k=[],f[a]=k);k.push({fn:b,callback:l,origin:e||n.pm.origin})},unbind:function(a,b){var e=c.data("listeners.postmessage");if(e)if(a)if(b){var f=e[a];if(f){for(var l=[],k=0,g=f.length;k<g;k++){var q=f[k];q.fn!==b&&l.push(q)}e[a]=l}}else delete e[a];else for(k in e)delete e[k]},data:function(a,
b){return b===m?c._data[a]:c._data[a]=b},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var a=[],b=0;32>b;b++)a[b]=c._CHARS[0|32*Math.random()];return a.join("")},_callback:function(a){var b=c.data("callbacks.postmessage");b||(b={},c.data("callbacks.postmessage",b));var e=c._random();b[e]=a;return e},_bind:function(){c.data("listening.postmessage")||(d.addEventListener?d.addEventListener("message",c._dispatch,!1):d.attachEvent&&d.attachEvent("onmessage",
c._dispatch),c.data("listening.postmessage",1))},_dispatch:function(a){try{var b=JSON.parse(a.data)}catch(e){console.warn("postmessage data invalid json: ",e);return}if(b.type){var f=(c.data("callbacks.postmessage")||{})[b.type];if(f)f(b.data);else for(var f=(c.data("listeners.postmessage")||{})[b.type]||[],l=0,k=f.length;l<k;l++){var g=f[l];if(g.origin&&"*"!==g.origin&&a.origin!==g.origin)console.warn("postmessage message origin mismatch",a.origin,g.origin),b.errback&&c.send({target:a.source,data:{message:"postmessage origin mismatch",
origin:[a.origin,g.origin]},type:b.errback});else{var q=function(e){b.callback&&c.send({target:a.source,data:e,type:b.callback})};try{g.callback?g.fn(b.data,q,a):q(g.fn(b.data,a))}catch(d){if(b.errback)c.send({target:a.source,data:d,type:b.errback});else throw d;}}}}else console.warn("postmessage message type required")},hash:{send:function(a,b){var e=a.target,f=a.url;if(f){var f=c.hash._url(f),l,k=c.hash._url(d.location.href);if(d==e.parent)l="parent";else try{for(var g=0,q=parent.frames.length;g<
q;g++)if(parent.frames[g]==d){l=g;break}}catch(h){l=d.name}null==l?console.warn("postmessage windows must be direct parent/child windows and the child must be available through the parent window.frames list"):(l={"x-requested-with":"postmessage",source:{name:l,url:k},postmessage:b},k="#x-postmessage-id="+c._random(),e.location=f+k+encodeURIComponent(JSON.stringify(l)))}else console.warn("postmessage target window url is required")},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:50,_bind:function(){c.data("polling.postmessage")||
(setInterval(function(){var a=""+d.location.hash,b=c.hash._regex.exec(a);b&&(b=b[1],c.hash._last!==b&&(c.hash._last=b,c.hash._dispatch(a.substring(c.hash._regex_len))))},n.pm.poll||200),c.data("polling.postmessage",1))},_dispatch:function(a){if(a){try{if(a=JSON.parse(decodeURIComponent(a)),!("postmessage"===a["x-requested-with"]&&a.source&&null!=a.source.name&&a.source.url&&a.postmessage))return}catch(b){return}var e=a.postmessage,f=(c.data("callbacks.postmessage")||{})[e.type];if(f)f(e.data);else{var l;
l="parent"===a.source.name?d.parent:d.frames[a.source.name];for(var f=(c.data("listeners.postmessage")||{})[e.type]||[],k=0,g=f.length;k<g;k++){var q=f[k];if(q.origin){var h=/https?\:\/\/[^\/]*/.exec(a.source.url)[0];if("*"!==q.origin&&h!==q.origin){console.warn("postmessage message origin mismatch",h,q.origin);e.errback&&c.send({target:l,data:{message:"postmessage origin mismatch",origin:[h,q.origin]},type:e.errback,hash:!0,url:a.source.url});continue}}h=function(b){e.callback&&c.send({target:l,
data:b,type:e.callback,hash:!0,url:a.source.url})};try{q.callback?q.fn(e.data,h):h(q.fn(e.data))}catch(m){if(e.errback)c.send({target:l,data:m,type:e.errback,hash:!0,url:a.source.url});else throw m;}}}}},_url:function(a){return(""+a).replace(/#.*$/,"")}}};n.extend(c,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})})(this,"undefined"===typeof jQuery?NO_JQUERY:jQuery);"JSON"in window&&window.JSON||(JSON={});
(function(){function d(a){return 10>a?"0"+a:a}function n(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=e[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function m(e,c){var g,d,h,s,t=a,r,p=c[e];p&&"object"===typeof p&&"function"===typeof p.toJSON&&(p=p.toJSON(e));"function"===typeof f&&(p=f.call(c,e,p));switch(typeof p){case "string":return n(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);
case "object":if(!p)return"null";a+=b;r=[];if("[object Array]"===Object.prototype.toString.apply(p)){s=p.length;for(g=0;g<s;g+=1)r[g]=m(g,p)||"null";h=0===r.length?"[]":a?"[\n"+a+r.join(",\n"+a)+"\n"+t+"]":"["+r.join(",")+"]";a=t;return h}if(f&&"object"===typeof f)for(s=f.length,g=0;g<s;g+=1)d=f[g],"string"===typeof d&&(h=m(d,p))&&r.push(n(d)+(a?": ":":")+h);else for(d in p)Object.hasOwnProperty.call(p,d)&&(h=m(d,p))&&r.push(n(d)+(a?": ":":")+h);h=0===r.length?"{}":a?"{\n"+a+r.join(",\n"+a)+"\n"+
t+"}":"{"+r.join(",")+"}";a=t;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return this.getUTCFullYear()+"-"+d(this.getUTCMonth()+1)+"-"+d(this.getUTCDate())+"T"+d(this.getUTCHours())+":"+d(this.getUTCMinutes())+":"+d(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var h=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,b,e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;"function"!==typeof JSON.stringify&&(JSON.stringify=function(e,c,g){var d;b=a="";if("number"===typeof g)for(d=0;d<g;d+=1)b+=" ";else"string"===typeof g&&(b=g);if((f=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return m("",{"":e})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function e(a,c){var f,l,d=a[c];if(d&&"object"===typeof d)for(f in d)Object.hasOwnProperty.call(d,f)&&(l=e(d,f),void 0!==l?d[f]=l:delete d[f]);return b.call(a,c,d)}var c;h.lastIndex=0;h.test(a)&&(a=a.replace(h,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return c=eval("("+a+")"),"function"===typeof b?e({"":c},""):c;throw new SyntaxError("JSON.parse");})})();window.allplayers=window.allplayers||{};
(function(d,n,m,h){var c={PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"};c.ALPHA+="abcdefghijklmnopqrstuvwxyz0123456789+/";c.makeDOMException=function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(a){var b=Error("DOM Exception 5");b.code=b.number=5;b.name=b.description="INVALID_CHARACTER_ERR";b.toString=function(){return"Error: "+b.name+": "+b.message};return b}};c.getbyte64=function(a,b){var e=c.ALPHA.indexOf(a.charAt(b));if(-1===e)throw c.makeDOMException();return e};
c.decode=function(a){a=""+a;var b=c.getbyte64,e,f,d,k=a.length;if(0===k)return a;if(0!==k%4)throw c.makeDOMException();e=0;a.charAt(k-1)===c.PADCHAR&&(e=1,a.charAt(k-2)===c.PADCHAR&&(e=2),k-=4);var g=[];for(f=0;f<k;f+=4)d=b(a,f)<<18|b(a,f+1)<<12|b(a,f+2)<<6|b(a,f+3),g.push(String.fromCharCode(d>>16,d>>8&255,d&255));switch(e){case 1:d=b(a,f)<<18;d|=b(a,f+1)<<12;d|=b(a,f+2)<<6;g.push(String.fromCharCode(d>>16,d>>8&255));break;case 2:d=b(a,f)<<18|b(a,f+1)<<12,g.push(String.fromCharCode(d>>16))}return g.join("")};
c.getbyte=function(a,b){var e=a.charCodeAt(b);if(255<e)throw c.makeDOMException();return e};c.encode=function(a){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var b=c.PADCHAR,e=c.ALPHA,f=c.getbyte,d,k,g=[];a=""+a;var h=a.length-a.length%3;if(0===a.length)return a;for(d=0;d<h;d+=3)k=f(a,d)<<16,k|=f(a,d+1)<<8,k|=f(a,d+2),g.push(e.charAt(k>>18)),g.push(e.charAt(k>>12&63)),g.push(e.charAt(k>>6&63)),g.push(e.charAt(k&63));switch(a.length-h){case 1:k=f(a,d)<<16;g.push(e.charAt(k>>
18)+e.charAt(k>>12&63)+b+b);break;case 2:k=f(a,d)<<16|f(a,d+1)<<8,g.push(e.charAt(k>>18)+e.charAt(k>>12&63)+e.charAt(k>>6&63)+b)}return g.join("")};m.base64=c;m.embed=function(a,b){if(b){a=a||{};for(var e in b)a.hasOwnProperty(e)||(a[e]=b[e]);this.options=a;this.init()}};m.embed.getParam=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(d.location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))};m.embed.prototype.init=function(){}})(window,
document,window.allplayers);window.allplayers=window.allplayers||{embed:{}};
(function(d,n,m,h,c){m.embed.server=function(a){m.embed.call(this,a,{getContainer:function(){return h()},isComplete:function(){return!1}})};m.embed.server.prototype=new m.embed;m.embed.server.prototype.constructor=m.embed.server;m.embed.server.prototype.init=function(){m.embed.prototype.init.call(this);this.ehost=m.embed.getParam("ehost");this.ehost=m.base64.decode(this.ehost);this.container=this.options.getContainer();this.height=0;this.heightTimer=null;this.queue={};var a=this,b=null;h(n).bind("DOMSubtreeModified",
function(){b&&clearTimeout(b);b=setTimeout(function(){a.resize()},500)});this.options.isComplete()&&h.pm({target:d.parent,url:this.ehost,type:"complete"});h.pm.bind("chromeMsgResp",function(b){if(b.hasOwnProperty("guid")&&a.queue.hasOwnProperty(b.guid))a.queue[b.guid](b.response)});h.pm.bind("chromePluginReady",function(a){h.pm({target:d,type:"chromePluginReady"})});h.pm.bind("addStyle",function(a){if(a){a=a.replace(/[<>]/g,"");var b=h('link[type="text/css"]');b.length&&(b=b.eq(b.length-1),b.after(h(n.createElement("style")).attr({type:"text/css"}).append(a)))}});
this.resize();h.pm({target:d.parent,url:this.ehost,type:"serverReady"})};m.embed.server.prototype.sendMessage=function(a,b){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};a.guid=e()+e()+e();h.pm({target:d.parent,type:"chromeMsg",url:this.ehost,data:a});this.queue[a.guid]=b};m.embed.server.prototype.resize=function(){h('a[href^="https://www."]',this.container).each(function(){var a=h(this).attr("href");h(this).attr({href:a.replace(/https:\/\/www.(.*?).allplayers.com/,
"https://platform.$1.allplayers.com")})});var a=this,b=function(){var c=a.container.outerHeight(!0);a.height!==c&&h.pm({target:d.parent,url:a.ehost,type:"init",data:{height:c,id:d.location.hash},success:function(b){a.height=b.height}});a.heightTimer&&clearTimeout(a.heightTimer);a.heightTimer=setTimeout(b,500)};b()}})(window,document,window.allplayers,jQuery);

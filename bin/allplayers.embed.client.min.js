var allplayers=allplayers||{};allplayers.embed=function(c,b){if(b){b.proxy="https://www.allplayers.com";b.proxy+="/sites/all/libraries/porthole/src/proxy.html";c=c||{};for(var a in b)c.hasOwnProperty(a)||(c[a]=b[a]);this.options=c;this.init()}};allplayers.embed.prototype.init=function(){};allplayers=allplayers||{embed:{}};jQuery.fn.allplayers_client||(jQuery.fn.allplayers_client=function(c){return jQuery(this).each(function(){new allplayers.embed.client(c,jQuery(this))})});
allplayers.embed.client=function(c,b){this.context=b;allplayers.embed.call(this,c,{spinner:"https://www.allplayers.com/sites/all/themes/allplayers960/images/loading.gif",loading:"loading...",base:"https://platform.allplayers.com",type:"registration",group:"api",query:!1,src:"",complete:function(){}})};allplayers.embed.client.prototype=new allplayers.embed;allplayers.embed.client.prototype.constructor=allplayers.embed.client;
allplayers.embed.client.prototype.init=function(){allplayers.embed.prototype.init.call(this);var c=jQuery(document.createElement("div")).css({background:"url("+this.options.spinner+") no-repeat",margin:"0 5px",paddingLeft:"20px"});c.append(this.options.loading);var b=this.context.attr("id")+"_iframe",a="";if(this.options.src)a=this.options.src;else{a=this.options.base+"/g/"+this.options.group;switch(this.options.type){case "registration":a+="/register"}if(this.options.query){var a=a+"?",d;for(d in this.options.query)a+=
d+"="+encodeURIComponent(this.options.query[d])}}var a=a+("#"+b),e=jQuery(document.createElement("iframe")).attr({id:b,name:b,scrolling:"no",seamless:"seamless",width:"100%",height:"0px",src:a}).css({border:"none",overflowY:"hidden"});this.context.append(c);this.context.append(e);var f=new Porthole.WindowProxy(this.options.proxy,e.attr("id")),g=this;f.addEventListener(function(a){if(a=a.data.hasOwnProperty("event")?a.data.event:!1){switch(a.name){case "init":c.remove();e.height(a.height).attr("height",
a.height+"px");break;case "complete":g.options.complete.call(g,a)}var b={};b[a.name]=!0;f.post(b)}})};

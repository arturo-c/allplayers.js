/*! allplayers.js 2014-07-02 */
var allplayers=allplayers||{};allplayers.api=allplayers.api||{},allplayers.api.batch={newBatch:function(a){var b={batch:[],error:function(){},users:null,eachUser:function(a){return{name:a,each:this.users}},allUsers:function(a){var b={name:a};return"string"==typeof this.users?b.source=this.users:b.value=this.users,b},add:function(a){this.batch.push(a)},send:function(a){$.ajax({url:allplayers.api.root+"/batch",type:"POST",dataType:"json",xhrFields:{withCredentials:!0},data:{batch:this.batch,"x-token":this.token},success:a,error:function(a,b,c){this.error(a,b,c)}})},setUsers:function(a,b,c,d,e){b?(this.batch.push({method:"GET",resource:"group/"+e+"/members",id:"getGroupMembers",query:{exclude:a.length>0?a:[],uuidOnly:!0,filter:c,groups:d}}),this.users="getGroupMembers"):this.users=a}};return a=a||{},$.extend(b,a)}};